---
excerpt: Want to use a flag (or any \*.png file) as a background of your
  map? You are in the right post.
header_img: ./assets/img/blog/20190618_imgpost-1.png
output:
  md_document:
    preserve_yaml: true
    variant: gfm
subtitle: Any picture as a basemap
tags:
- rstats
- rspatial
- beautiful_maps
- maps
- terra
- flags
- sf
- rasterpic
- giscoR
title: "Beautiful Maps with R (III): Fun with flags revisited"
---

On 27 Jan.Â 2022 my package **rasterpic** was accepted on
[CRAN](https://cran.r-project.org/package=rasterpic) (Hooray!!). This
package allows to geotag images, using an spatial object (from **sf** or
**terra**) as a geographic reference.

I tweeted about that, and it seems to have a good feedback from the
[#rspatial](https://twitter.com/hashtag/rspatial) community:

<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">

<a href="https://twitter.com/hashtag/rspatial?src=hash&amp;ref_src=twsrc%5Etfw">#rspatial</a>
Do we need a package for using our own pictures as base maps? I donâ€™t
know, but anyway we have it! {rasterpic} ðŸ“¦ is now on CRAN, and we can
convert our pngs to spatial rasters like this
<a href="https://t.co/fpoollARoN">https://t.co/fpoollARoN</a>
<a href="https://t.co/l9o7rQwdgX">pic.twitter.com/l9o7rQwdgX</a>

</p>

â€” dieghernan Ù† (@dhernangomez)
<a href="https://twitter.com/dhernangomez/status/1486666356544225281?ref_src=twsrc%5Etfw">January
27, 2022</a>

</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

I received also an interesting reply to this:

<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">

Ooh I think a map with countries filled with their own flag would be
poppinâ€™.

</p>

â€” Hefin Ioan Rhys (@HRJ21)
<a href="https://twitter.com/HRJ21/status/1486976368936116225?ref_src=twsrc%5Etfw">January
28, 2022</a>

</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

That remembers me to a [previous
post](https://dieghernan.github.io/202002_cartography1/#png-layer) that
I wrote when I added some new functions to the **cartography** package,
now replaced by the
[**mapsf**](https://cran.r-project.org/package=mapsf) package.

With rasterpic we have now an alternative tool for creating maps using
images, and this quick post would show you how to do it.

I would replicate the Africa map presented on my previous plot, but this
time I would use newer packages, as
[**giscoR**](https://cran.r-project.org/package=giscoR) package, and the
development version of ggspatial (not released yet), that adds support
to `SpatRaster` object on ggplot2. The flags would be extracted from the
GitHub repository <https://github.com/hampusborgos/country-flags>.

``` r
# Development version of ggspatial
# devtools::install_github("paleolimbot/ggspatial")
library(ggspatial)
library(ggplot2)
library(giscoR)
library(dplyr)

# For country names
library(countrycode)

world <- gisco_get_countries(epsg = 3857)
africa <- gisco_get_countries(region = "Africa", epsg = 3857)

# Base map of Africa
africa <- ggplot(world) +
  geom_sf(fill="grey90") +
  # Zoom on Africa
  coord_sf(xlim=c(-2000000, 6000000),
           ylim=c(-4000000, 5000000)) +
  theme_minimal() +
  theme(panel.background = element_rect(fill="lightblue"))

africa
```

<img src="2021-01-28-maps_flag_files/figure-gfm/unnamed-chunk-1-1.png" width="100%" />
